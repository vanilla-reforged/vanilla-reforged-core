DROP PROCEDURE IF EXISTS add_migration;
DELIMITER ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20240925012102');
IF v = 0 THEN
INSERT INTO `migrations` VALUES ('20240925012102');
-- Add your query below.


-- Add missing Giant Surf Glider spawns before 1.12.
INSERT INTO `creature` (`guid`, `id`, `id2`, `id3`, `id4`, `id5`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecsmin`, `spawntimesecsmax`, `wander_distance`, `health_percent`, `mana_percent`, `movement_type`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES 
(8088, 5432, 0, 0, 0, 0, 1, -9845.63, -3607.27, 9.10354, 1.2835, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8089, 5432, 0, 0, 0, 0, 1, -9845.6, -3554.69, 0.841264, 5.59129, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8090, 5432, 0, 0, 0, 0, 1, -9797.77, -3623.49, 9.67502, 5.02406, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8091, 5432, 0, 0, 0, 0, 1, -9952.07, -3580.71, 0.170267, 2.15236, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8092, 5432, 0, 0, 0, 0, 1, -9916.08, -3620.28, 7.35177, 5.41491, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8093, 5432, 0, 0, 0, 0, 1, -9883.04, -3584.33, 0.948743, 4.79845, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8094, 5432, 0, 0, 0, 0, 1, -10044.1, -3686.17, 4.68903, 5.27223, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8095, 5432, 0, 0, 0, 0, 1, -10046.2, -3615.7, 0.317225, 0.172861, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8096, 5432, 0, 0, 0, 0, 1, -10079.6, -3649.37, 0.795353, 6.24439, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8097, 5432, 0, 0, 0, 0, 1, -10119.1, -3752.8, 5.88625, 4.42487, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8098, 5432, 0, 0, 0, 0, 1, -10085.4, -3719.69, 7.22795, 3.77273, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8099, 5432, 0, 0, 0, 0, 1, -10146, -3722.22, 0.302036, 5.89215, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8100, 5432, 0, 0, 0, 0, 1, -10183.5, -3878.37, 1.88957, 1.58251, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8101, 5432, 0, 0, 0, 0, 1, -10180.4, -3816.19, 2.11772, 0.119507, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8102, 5432, 0, 0, 0, 0, 1, -10152.8, -3845.22, 1.94172, 2.12542, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8103, 5432, 0, 0, 0, 0, 1, -10213, -3849.2, 2.25056, 6.12699, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8104, 5432, 0, 0, 0, 0, 1, -10283.7, -3845.53, 2.06838, 1.7337, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8105, 5432, 0, 0, 0, 0, 1, -10312.1, -3882.41, 1.14159, 0.431316, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8106, 5432, 0, 0, 0, 0, 1, -10350.9, -3978.24, -1.88379, 1.14091, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8107, 5432, 0, 0, 0, 0, 1, -10340.9, -3918.49, 0.677082, 6.17949, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8108, 5432, 0, 0, 0, 0, 1, -10321.4, -3950.69, 0.0812521, 3.46952, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8109, 5432, 0, 0, 0, 0, 1, -10284.4, -4054.3, -2.63578, 4.91515, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8110, 5432, 0, 0, 0, 0, 1, -10253.4, -4086.93, 0.779496, 4.05276, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8111, 5432, 0, 0, 0, 0, 1, -10145.8, -4051.89, 4.12939, 6.18546, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8112, 5432, 0, 0, 0, 0, 1, -10110.7, -4149.29, 4.61469, 6.2539, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8113, 5432, 0, 0, 0, 0, 1, -10020.8, -4185.33, 6.24023, 3.44483, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8114, 5432, 0, 0, 0, 0, 1, -10015.6, -4251.88, 5.58714, 5.55755, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8115, 5432, 0, 0, 0, 0, 1, -10050.2, -4220.7, 3.48992, 4.72215, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8116, 5432, 0, 0, 0, 0, 1, -9986.14, -4279.51, 1.87083, 2.79541, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8117, 5432, 0, 0, 0, 0, 1, -9949.44, -4323.42, 1.37733, 5.0675, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8118, 5432, 0, 0, 0, 0, 1, -9880.38, -4322.45, 2.07926, 5.19774, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8119, 5432, 0, 0, 0, 0, 1, -9849.92, -4350.29, 2.82243, 0.243822, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8120, 5432, 0, 0, 0, 0, 1, -9814.04, -4382.99, 2.31919, 0.337734, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8121, 5432, 0, 0, 0, 0, 1, -9786.04, -4350.59, 3.54937, 3.13183, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8122, 5432, 0, 0, 0, 0, 1, -9716.4, -4415.85, 1.7327, 1.67843, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8123, 5432, 0, 0, 0, 0, 1, -9759.81, -4383.74, 1.554, 3.06137, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8124, 5432, 0, 0, 0, 0, 1, -9788.76, -4413.63, 0.812791, 2.71489, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8125, 5432, 0, 0, 0, 0, 1, -9629.82, -4369.27, 1.21655, 5.88763, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9),
(8126, 5432, 0, 0, 0, 0, 1, -9681.3, -4384.98, 4.53995, 5.96539, 300, 300, 15, 100, 100, 1, 0, 0, 0, 9);
UPDATE `creature` SET `patch_min`=10 WHERE `guid` IN (23611, 23612, 23613, 23614, 23615, 23616, 23617, 23618, 23619, 23620, 23621, 23622, 23623, 23624, 23625, 23626, 23627, 23628, 23629, 23630, 23631, 23632, 23633, 23634, 23635, 23636, 23637, 23638, 23639, 23640, 23641, 23642, 23643, 23644, 23645, 23646, 23647, 23648, 23649, 23650, 23651, 23652, 23653, 23654, 23655, 23656, 23657, 23658, 23659, 23660, 23661, 23662, 23663, 23664, 23665, 23666, 23667, 23668, 23669, 23670, 23671, 23672, 23673, 23674, 23675, 23676, 23677, 23678, 23679, 23680, 23681, 23682, 23683, 23684, 23685, 23686, 23687, 23688, 23689, 23690, 23691, 23692, 23693, 23694, 23695, 23696, 23697, 23698, 23699, 23700, 23701, 23702, 23703, 23704, 23705);

-- Surf Gliders have reduced aggro radius.
-- "These seem to have a much smaller aggro radius than normal mobs. Despite being level 40, they don't aggro unless I go right up close to them, like 10 yards or so."
-- https://www.wowhead.com/classic/npc=5431/surf-glider#comments
UPDATE `creature_template` SET `detection_range`=10 WHERE `entry`=5431;

-- Surf Gliders should always drop skinning loot.
DELETE FROM `skinning_loot_template` WHERE `entry`=5431;
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5431, 4304, 77, 1, 1, 1, 0, 0, 10);
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5431, 8167, 50, 0, 1, 2, 0, 0, 10);
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5431, 8169, 3, 1, 1, 1, 0, 0, 10);
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5431, 8170, 20, 1, 1, 1, 0, 0, 10);

-- Add skinning loot for Giant Surf Gliders.
DELETE FROM `skinning_loot_template` WHERE `entry`=5432;
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5432, 4304, 77, 1, 1, 1, 0, 0, 10);
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5432, 8167, 50, 0, 1, 2, 0, 0, 10);
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5432, 8169, 3, 1, 1, 1, 0, 0, 10);
INSERT INTO `skinning_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES (5432, 8170, 20, 1, 1, 1, 0, 0, 10);
UPDATE `creature_template` SET `skinning_loot_id`=5432 WHERE `entry`=5432;


-- End of migration.
END IF;
END??
DELIMITER ;
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
